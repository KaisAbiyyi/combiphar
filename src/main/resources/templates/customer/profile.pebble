{# ========================================================================== #}
{# PROFILE PAGE - Customer profile and settings #}
{# ========================================================================== #}
{% extends "customer/layout" %}

{% block content %}
<section class="profile-page">
  <div class="profile-page__container">
    
    {# Page Header #}
    <div class="profile-page__header">
      <h1 class="profile-page__title">Pengaturan Akun</h1>
      <a href="/catalog" class="profile-page__back">Kembali ke Katalog</a>
    </div>

    {# Main Grid Layout #}
    <div class="profile-page__grid">
      
      {% if currentUser is not null %}
      {# Left Sidebar - User Card #}
      <div class="profile-sidebar">
        <div class="profile-user-card">
          <div class="profile-user-card__avatar">
            <img src="/static/images/avatar-placeholder.jpg" alt="{{ currentUser.name }}" class="profile-user-card__img" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
            <div class="profile-user-card__placeholder" style="display: none;">{{ currentUser.initial }}</div>
          </div>
          
          <div class="profile-user-card__info">
            <p class="profile-user-card__label">Akun Terdaftar</p>
            <h2 class="profile-user-card__name">{{ currentUser.name | default('User') }}</h2>
            <p class="profile-user-card__email">{{ currentUser.email | default('-') }}</p>
          </div>

          <div class="profile-user-card__stats">
            <div class="profile-stat-row">
              <span class="profile-stat-row__label">Status Keanggotaan</span>
              <span class="profile-stat-badge profile-stat-badge--verified">{{ currentUser.role | default('CUSTOMER') }}</span>
            </div>
            
            <div class="profile-stat-row">
              <span class="profile-stat-row__label">Status Akun</span>
              <span class="profile-stat-row__value">{{ currentUser.status | default('ACTIVE') }}</span>
            </div>
          </div>

          <a href="/logout" class="profile-logout-btn" style="text-align: center; text-decoration: none; display: block;">Keluar</a>
        </div>
      </div>

      {# Right Content - Forms #}
      <div class="profile-content">
        
        {# Personal Information Card #}
        <div class="profile-info-card">
          <div class="profile-info-card__header">
            <h3 class="profile-info-card__title">Informasi Pribadi</h3>
            <p class="profile-info-card__subtitle">Data kontak dan alamat Anda</p>
          </div>

          <form class="profile-form">
            <div class="profile-form__row">
              <div class="profile-form__group">
                <label class="profile-form__label" for="fullName">Nama Lengkap</label>
                <input 
                  type="text" 
                  id="fullName" 
                  class="profile-form__input" 
                  value="{{ currentUser.name | default('') }}"
                  readonly
                >
              </div>

              <div class="profile-form__group">
                <label class="profile-form__label" for="email">Email</label>
                <input 
                  type="email" 
                  id="email" 
                  class="profile-form__input" 
                  value="{{ currentUser.email | default('') }}"
                  readonly
                >
              </div>
            </div>

            <div class="profile-form__group">
              <label class="profile-form__label" for="phone">Nomor Telepon</label>
              <input 
                type="tel" 
                id="phone" 
                class="profile-form__input" 
                value="{{ currentUser.phone | default('-') }}"
                readonly
              >
            </div>

            <div class="profile-form__group">
              <label class="profile-form__label" for="address">Alamat</label>
              <textarea id="address" class="profile-form__input" readonly>{{ currentUser.address | default('-') }}</textarea>
            </div>
          </form>
        </div>
      </div>
      {% else %}
      <div class="profile-content" style="grid-column: span 2; text-align: center; padding: 4rem;">
        <h3>Silakan login untuk melihat profil Anda</h3>
        <a href="/login" class="btn btn--primary">Login Sekarang</a>
      </div>
      {% endif %}
    </div>

  </div>
</section>
{% endblock %}
